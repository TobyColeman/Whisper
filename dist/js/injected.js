var extensionId="mljjhffoolehodpjmimidgkfgannmbdn";!function(e){var t=e.send,n=e.open;e.open=function(s,a){this.onreadystatechange;e.send=function(e){if("POST"!=s||a.match(/https:\/\/upload\.messenger\.com\/ajax\/mercury\/upload\.php[^*]/))t.call(this,e);else{var n=e.match(/fb_dtsg=(.*?)&/)[1],o=e.match(/__user=(.*?)&/)[1],i={type:"update_post_info",fb_dtsg:n,uid:o};if(chrome.runtime.sendMessage(extensionId,i),a.match("/ajax/mercury/send_messages.php[^ ]*")){var c=this,i={type:"encrypt_message",url:a,data:e};chrome.runtime.sendMessage(extensionId,i,function(e){t.call(c,e.message)})}else t.call(this,e)}},n.call(this,s,a,!0)}}(XMLHttpRequest.prototype),function(){function e(e,t){var n=5;window.setTimeout(function(){window[e]?t():window.setTimeout(arguments.callee,n)},n)}e("AsyncRequest",function(){!function(e){var t=e._dispatchResponse;e._dispatchResponse=function(e){var n=this,s=e.getPayload();if(s.actions&&s.actions.length>0){var a={type:"decrypt_message_batch",data:s.actions};chrome.runtime.sendMessage(extensionId,a,function(s){e.payload.actions=s.message,t.call(n,e)})}else t.call(this,e)}}(AsyncRequest.prototype)}),e("Arbiter",function(){var e=Arbiter.inform;Arbiter.inform=function(t,n,s){if("channel/message:messaging"==t&&"inbox"==n.obj.folder){var a=this,o={type:"decrypt_message",data:n.obj.message.body};chrome.runtime.sendMessage(extensionId,o,function(o){n.obj.message.body=o.message,e.call(a,t,n,s)})}else e.call(this,t,n,s)}}),window.addEventListener("DOMContentLoaded",function(){var e=new MutationObserver(function(t){t.forEach(function(t){"_kmc"==t.target.className&&(document.getElementsByClassName("_54-z")[0].setAttribute("contenteditable",!1),e.disconnect())})});e.observe(document.body,{subtree:!0,attributes:!0})})}();